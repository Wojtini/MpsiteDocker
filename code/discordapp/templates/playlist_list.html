{% extends 'base.html' %}
{% load static %}

{% block extrahead %}
    <link rel="stylesheet" type="text/css"
          href="{% static 'discord.css' %}">
    <link rel="stylesheet" type="text/css"
          href="{% static 'playlist_list.css' %}">
{% endblock %}

{% block content %}
    <aside>
        <div class="playlist_list">
            {% for playlist in playlists %}
        <!--        {{playlist}}-->
                <div class="playlist_entry">
                    {{playlist.name}}
                    <a href="play/{{playlist.name}}"><button>Play</button></a>
                    <a href=""></a><button onclick="toggleDisplay('{{playlist.name}}')">View playlist</button>
                </div>
            {% endfor %}
        </div>
    </aside>
    {% for playlist in playlists %}
        <div class="songs_list" id="{{playlist.name}}" style="display: none;">
            <table>
                <tr>
                    <th><b>Songs</b></th>
                </tr>
                {% for song in playlist.songs %}
                <tr>
                    <th>
                        <a href="{{song.url}}">{{song.name}}</a>
                        <a>Delete</a>
                    </th>
                </tr>
                {% endfor %}
            </table>
            {% if playlist.can_manage %}
            <button>Add music</button>
            {% endif %}
        </div>
    {% endfor %}

    <script>
        function hideAll() {
          var elements = document.getElementsByClassName('songs_list');
          for (var i = 0; i < elements.length; i++) {
              elements.item(i).style.display = 'none';
          }
        }
        function toggleDisplay(id) {
          hideAll();
          var el = document.getElementById(id);
          if (el && el.style) {
            el.style.display = el.style.display != 'none'? 'none' : '';
          }
        }
    </script>
{% endblock %}